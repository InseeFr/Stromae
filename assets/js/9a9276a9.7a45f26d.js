"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2051],{434:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>a,frontMatter:()=>r,metadata:()=>l,toc:()=>h});var d=t(5893),s=t(1151);const r={},i="Appels Api",l={id:"features/orchestrated/api",title:"Appels Api",description:"Donn\xe9es de l'unit\xe9s enqu\xeat\xe9es",source:"@site/docs/features/orchestrated/api.md",sourceDirName:"features/orchestrated",slug:"/features/orchestrated/api",permalink:"/Stromae/docs/features/orchestrated/api",draft:!1,unlisted:!1,editUrl:"https://github.com/InseeFr/Stromae/tree/v3-master/docs/docs/features/orchestrated/api.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Orchestration de questionnaire",permalink:"/Stromae/docs/category/orchestration-de-questionnaire"},next:{title:"Contr\xf4les",permalink:"/Stromae/docs/features/orchestrated/controls"}},c={},h=[{value:"Donn\xe9es de l&#39;unit\xe9s enqu\xeat\xe9es",id:"donn\xe9es-de-lunit\xe9s-enqu\xeat\xe9es",level:2},{value:"\xc9tat de l&#39;unit\xe9 (stateData)",id:"\xe9tat-de-lunit\xe9-statedata",level:3},{value:"Donn\xe9es (data)",id:"donn\xe9es-data",level:3},{value:"Paradonn\xe9es",id:"paradonn\xe9es",level:3},{value:"Preuve de d\xe9p\xf4t",id:"preuve-de-d\xe9p\xf4t",level:3},{value:"Donn\xe9es de questionnaire",id:"donn\xe9es-de-questionnaire",level:2},{value:"Mod\xe8le de questionnaire",id:"mod\xe8le-de-questionnaire",level:3},{value:"Ressources",id:"ressources",level:3},{value:"Donn\xe9es de l&#39;enqu\xeate",id:"donn\xe9es-de-lenqu\xeate",level:2},{value:"Metadonn\xe9es",id:"metadonn\xe9es",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"appels-api",children:"Appels Api"}),"\n",(0,d.jsx)(n.h2,{id:"donn\xe9es-de-lunit\xe9s-enqu\xeat\xe9es",children:"Donn\xe9es de l'unit\xe9s enqu\xeat\xe9es"}),"\n",(0,d.jsx)(n.p,{children:"Une unit\xe9 enqu\xeat\xe9e est d\xe9crit par 2 objets dans dans l'orchestrateur:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["l'objet ",(0,d.jsx)(n.code,{children:"stateData"}),", qui est un objet contenant les informations \xe0 propos de l'\xe9tat de l'unit\xe9 enqu\xeat\xe9e."]}),"\n",(0,d.jsxs)(n.li,{children:["l'objet ",(0,d.jsx)(n.code,{children:"data"}),", qui est l'objet renvoy\xe9 par Lunatic, contenant toutes les donn\xe9es collect\xe9es"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\xe9tat-de-lunit\xe9-statedata",children:"\xc9tat de l'unit\xe9 (stateData)"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Route"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"S\xe9curis\xe9 par Bearer token"}),(0,d.jsx)(n.th,{children:"Exemple de r\xe9ponse"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/survey-unit/${surveyUnitId}/state-data"})}),(0,d.jsx)(n.td,{children:'R\xe9cup\xe8re l\'objet "data"'}),(0,d.jsx)(n.td,{children:"oui"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PUT"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/survey-unit/${surveyUnitId}/state-data"})}),(0,d.jsx)(n.td,{children:'Envoie l\'objet "data"'}),(0,d.jsx)(n.td,{children:"oui"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"donn\xe9es-data",children:"Donn\xe9es (data)"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Route"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"S\xe9curis\xe9 par Bearer token"}),(0,d.jsx)(n.th,{children:"Exemple de r\xe9ponse"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/survey-unit/${surveyUnitId}/data"})}),(0,d.jsx)(n.td,{children:'R\xe9cup\xe8re l\'objet "data"'}),(0,d.jsx)(n.td,{children:"oui"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PUT"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/survey-unit/${surveyUnitId}/data"})}),(0,d.jsx)(n.td,{children:'Envoie l\'objet "data"'}),(0,d.jsx)(n.td,{children:"oui"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"paradonn\xe9es",children:"Paradonn\xe9es"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Route"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"S\xe9curis\xe9 par Bearer token"}),(0,d.jsx)(n.th,{children:"Exemple de r\xe9ponse"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"POST"}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"/api/paradata"}),"  Le corps de la requ\xeate renvoie toute l'information n\xe9cessaire"]}),(0,d.jsx)(n.td,{children:"oui"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})}),(0,d.jsx)(n.td,{})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"preuve-de-d\xe9p\xf4t",children:"Preuve de d\xe9p\xf4t"}),"\n",(0,d.jsx)(n.p,{children:"La preuve de d\xe9p\xf4t est un fichier au format PDF t\xe9l\xe9chargeable une fois le questionnaire valid\xe9 par le r\xe9pondant."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Route"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"S\xe9curis\xe9 par Bearer token"}),(0,d.jsx)(n.th,{children:"Exemple de r\xe9ponse"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/survey-unit/${surveyUnitId}/deposit-proof"})}),(0,d.jsx)(n.td,{children:"R\xe9cup\xe8re le blob du PDF"}),(0,d.jsx)(n.td,{children:"oui"}),(0,d.jsx)(n.td,{children:"Fichier PDF"})]})})]}),"\n",(0,d.jsx)(n.h2,{id:"donn\xe9es-de-questionnaire",children:"Donn\xe9es de questionnaire"}),"\n",(0,d.jsx)(n.h3,{id:"mod\xe8le-de-questionnaire",children:"Mod\xe8le de questionnaire"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Route"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"S\xe9curis\xe9 par Bearer token"}),(0,d.jsx)(n.th,{children:"Exemple de r\xe9ponse"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/questionnaire/${surveyId}"})}),(0,d.jsx)(n.td,{children:"R\xe9cup\xe8re le mod\xe8le de questionnaire Lunatic"}),(0,d.jsx)(n.td,{children:"oui"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"ressources",children:"Ressources"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Route"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"S\xe9curis\xe9 par Bearer token"}),(0,d.jsx)(n.th,{children:"Exemple de r\xe9ponse"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/nomenclature/${nomenclatureId}"})}),(0,d.jsx)(n.td,{children:"R\xe9cup\xe8re la nomenclature"}),(0,d.jsx)(n.td,{children:"oui ?"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})})]})})]}),"\n",(0,d.jsx)(n.h2,{id:"donn\xe9es-de-lenqu\xeate",children:"Donn\xe9es de l'enqu\xeate"}),"\n",(0,d.jsx)(n.h3,{id:"metadonn\xe9es",children:"Metadonn\xe9es"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Route"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"S\xe9curis\xe9 par Bearer token"}),(0,d.jsx)(n.th,{children:"Exemple de r\xe9ponse"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/api/questionnaire/${surveyId}/metadata"})}),(0,d.jsx)(n.td,{children:'R\xe9cup\xe8re le fichier "metadata"'}),(0,d.jsx)(n.td,{children:"non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"json {}"})})]})})]})]})}function a(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>i});var d=t(7294);const s={},r=d.createContext(s);function i(e){const n=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);