"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8307],{3049:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var r=t(5893),s=t(1151);const i={},a="Persistence",c={id:"features/orchestrated/persitence",title:"Persistence",description:"Sauvegarde via une api les donn\xe9es",source:"@site/docs/features/orchestrated/persitence.md",sourceDirName:"features/orchestrated",slug:"/features/orchestrated/persitence",permalink:"/Stromae/docs/features/orchestrated/persitence",draft:!1,unlisted:!1,editUrl:"https://github.com/InseeFr/Stromae/tree/v3-master/docs/docs/features/orchestrated/persitence.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Capture de paradonn\xe9es",permalink:"/Stromae/docs/features/orchestrated/paradata"},next:{title:"Lecture seule",permalink:"/Stromae/docs/features/orchestrated/review"}},d={},l=[{value:"DATA",id:"data",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"persistence",children:"Persistence"}),"\n",(0,r.jsx)(n.p,{children:"Sauvegarde via une api les donn\xe9es"}),"\n",(0,r.jsx)(n.h2,{id:"data",children:"DATA"}),"\n",(0,r.jsx)(n.p,{children:"L'objet data est l'objet principal. Voil\xe0 un exemple :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n\t"stateData": {\n\t\t"state": "INIT",\n\t\t"date": null,\n\t\t"currentPage": null\n\t},\n\n\t"personalization": [{ "name": "QuiRepond1", "value": "Mme Dupond" }],\n\n\t"data": {}\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Il est compos\xe9 de 3 morceaux :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"stateData"}),": donn\xe9e relative \xe0 l'\xe9tat du questionnaire"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"date"}),": timestamp correspondant \xe0 la date du dernier envoi \xe0 l'api"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"state"}),": ",(0,r.jsx)(n.code,{children:"INIT"})," / ",(0,r.jsx)(n.code,{children:"STARTED"})," / ",(0,r.jsx)(n.code,{children:"VALIDATED"})," : correspond \xe0 l'\xe9tat du questionnaire","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"INIT"}),": initi\xe9 dans la plateforme de collecet"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"STARTED"}),": au moins une variable collect\xe9e"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"VALIDATED"}),": le questionnaire a \xe9t\xe9 valid\xe9/exp\xe9di\xe9 (on ne peut pas revenir en arri\xe8re sauf lors du mode ",(0,r.jsx)(n.code,{children:"review"})," ou lecture seule)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"currentPage"}),": correspond au pageTag renvoy\xe9 par Lunatic.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["si ",(0,r.jsx)(n.code,{children:"null"})," -> renvoi vers la page welcome ",(0,r.jsx)(n.code,{children:"/questionnaire/${xxx}/unite-enquetee/${yyy}/acceuil"})]}),"\n",(0,r.jsxs)(n.li,{children:["si non ",(0,r.jsx)(n.code,{children:"null"})," et stateData.State \xe9gale ",(0,r.jsx)(n.code,{children:"STARTED"})," -> renvoi vers le questionnaire ",(0,r.jsx)(n.code,{children:"/questionnaire/${xxx}/unite-enquetee/${yyy}"})]}),"\n",(0,r.jsxs)(n.li,{children:["si non ",(0,r.jsx)(n.code,{children:"null"})," et stateData.State \xe9gale ",(0,r.jsx)(n.code,{children:"VALIDATED"})," -> renvoi vers la page de fin ",(0,r.jsx)(n.code,{children:"/questionnaire/${xxx}/unite-enquetee/${yyy}/fin"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"personalization"}),": est un tableau de variable (",(0,r.jsx)(n.code,{children:"name"}),", ",(0,r.jsx)(n.code,{children:"value"}),") qui permet la personnalisation (au niveau unit\xe9-enqu\xeat\xe9e) de la page d'accueil."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"data"}),": objet complet correspondant aux donn\xe9e de Lunatic"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>a});var r=t(7294);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);